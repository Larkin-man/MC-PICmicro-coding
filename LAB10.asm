#include<p16f84.inc>
 ORG 0
 GOTO BEGIN
 ORG 100h
BEGIN

T1 EQU 0Ch
T2 EQU 0Dh
T3 EQU 0Eh
DPULS EQU 0Fh
DPAUSE EQU 010h
D1 EQU 011h

 BCF STATUS,RP0
 CLRF PORTB
 MOVLW B'00000000'
 BSF STATUS,RP0
 MOVWF TRISB

 BCF STATUS,RP0
 CLRF PORTA
 MOVLW B'11111'
 BSF STATUS,RP0
 MOVWF TRISA
 BCF STATUS,RP0

MAIN
 MOVF PORTA,0
 MOVWF D1
 
 MOVLW B'11000'
 XORWF D1,0
 BTFSC STATUS,Z
 CALL I3P2i5

 MOVLW B'01100'
 XORWF D1,0
 BTFSC STATUS,Z
 CALL I10P0i5

 MOVLW B'00110'
 XORWF D1,0
 BTFSC STATUS,Z
 CALL I1P5

 MOVLW B'00011'
 XORWF D1,0
 BTFSC STATUS,Z
 CALL I9P5

 MOVLW B'10001'
 XORWF D1,0
 BTFSC STATUS,Z
 CALL I2P2

 GOTO MAIN


I3P2i5
 MOVLW D'6'
 MOVWF DPULS
 MOVLW D'5'
 MOVWF DPAUSE
 CALL PULS
 RETURN

I10P0i5
 MOVLW D'20'
 MOVWF DPULS
 MOVLW D'1'
 MOVWF DPAUSE
 CALL PULS
 RETURN

I1P5
 MOVLW D'2'
 MOVWF DPULS
 MOVLW D'10'
 MOVWF DPAUSE
 CALL PULS
 RETURN

I9P5
 MOVLW D'18'
 MOVWF DPULS
 MOVLW D'10'
 MOVWF DPAUSE
 CALL PULS
 RETURN

I2P2
 MOVLW D'4'
 MOVWF DPULS
 MOVLW D'4'
 MOVWF DPAUSE
 CALL PULS
 RETURN

PULS
 MOVLW B'11111111'
 MOVWF PORTB
ONE
 CALL PAUSE
 DECFSZ DPULS,1
 GOTO ONE
 CLRF PORTB 
TWO
 CALL PAUSE
 DECFSZ DPAUSE,1
 GOTO TWO
 RETURN

PAUSE ;~0,5 SEC
 MOVLW D'11'
 MOVWF T1
THREE
 MOVLW D'255'
 MOVWF T2
 MOVWF T3
FOUR       ;~0,04896125 sec
 DECFSZ T3,1
 GOTO FOUR
 DECFSZ T2,1
 GOTO FOUR
 DECFSZ T1,1
 GOTO THREE
 RETURN

 END
