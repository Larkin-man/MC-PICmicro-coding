;Программа №3 по ТС А и У
#include<PIC16F84.inc>
list p=16f84

PROMRESULT EQU 0Ch
PROMRESULT1 EQU 0Dh

MOVLW B'11111'
TRIS PORTA
OPTION
MOVLW 0
TRIS PORTB
OPTION

BEGIN

CLRF PROMRESULT
CLRF PROMRESULT1
;CLRF PORTA
;CLRF PORTB
MOVLW B'11110'
SUBWF PORTA,0
BTFSC STATUS,Z
CALL PODPR1

MOVLW B'11101'
SUBWF PORTA,0
BTFSC STATUS,Z
CALL PODPR1
GOTO BEGIN

PODPR1
N
MOVLW D'0'
MOVWF PORTB 
MOVLW D'129'
CALL VSPPODPR1
MOVLW D'195'
CALL VSPPODPR1
MOVLW D'231'
CALL VSPPODPR1
MOVLW D'255'
CALL VSPPODPR1
MOVLW D'231'
CALL VSPPODPR1
MOVLW D'195'
CALL VSPPODPR1
MOVLW D'129'
CALL VSPPODPR1
MOVLW D'0'
CALL VSPPODPR1
GOTO N
RETURN

PODPR2
M
MOVLW D'0'
MOVWF PORTB 
MOVLW D'129'
CALL VSPPODPR2
MOVLW D'66'
CALL VSPPODPR2
MOVLW D'36'
CALL VSPPODPR2
MOVLW D'24'
CALL VSPPODPR2
GOTO M
RETURN

ZADER
MOVLW D'255'
MOVWF PROMRESULT
MOVWF PROMRESULT1
P
W
NOP
DECFSZ PROMRESULT,1
GOTO W
NOP
DECFSZ PROMRESULT1,1
GOTO P
RETURN

VSPODPR1
MOVWF PORTB
CALL ZADER
MOVLW B'11101'
SUBWF PORTA,0
BTFSS STATUS,Z
RETURN
GOTO BEGIN

VSPODPR2
MOVWF PORTB
CALL ZADER
MOVLW B'11110'
SUBWF PORTA,0
BTFSS STATUS,Z
RETURN
GOTO BEGIN

END
