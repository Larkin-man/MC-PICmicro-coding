#include<p16f84.inc>
 ORG 0
 GOTO BEGIN
 ORG 100h
BEGIN

D1 EQU 0Ch
D2 EQU 0Dh
D3 EQU 0Eh
D4 EQU 0Fh
D5 EQU 010h

 BCF STATUS,RP0
 CLRF PORTB
 MOVLW B'00000000'
 BSF STATUS,RP0
 MOVWF TRISB

 BCF STATUS,RP0
 CLRF PORTA
 MOVLW B'11111'
 BSF STATUS,RP0
 MOVWF TRISA
 BCF STATUS,RP0

MAINLOOP
MOVF PORTA,0
MOVWF D5
MOVLW B'10000'
XORWF D5,0
BTFSC STATUS,Z
CALL i0d5p9
MOVLW B'01000'
XORWF D5,0
BTFSC STATUS,Z
CALL i4p2
MOVLW B'00100'
XORWF D5,0
BTFSC STATUS,Z
CALL i7p8d5
MOVLW B'00010'
XORWF D5,0
BTFSC STATUS,Z
CALL i1d5p8
MOVLW B'00001'
XORWF D5,0
BTFSC STATUS,Z
CALL i2p5
GOTO MAINLOOP


i0d5p9
MOVLW D'10'
MOVWF D3
MOVLW D'184'
MOVWF D4
CALL PULS
RETURN

i4p2
MOVLW D'82'
MOVWF D3
MOVLW D'41'
MOVWF D4
CALL PULS
RETURN

i7p8d5
MOVLW D'143'
MOVWF D3
MOVLW D'174'
MOVWF D4
CALL PULS
RETURN

i1d5p8
MOVLW D'31'
MOVWF D3
MOVLW D'163'
MOVWF D4
CALL PULS
RETURN

i2p5
MOVLW D'41'
MOVWF D3
MOVLW D'102'
MOVWF D4
CALL PULS
RETURN

PULS
MOVLW B'11111111'
MOVWF PORTB
C1
CALL ZZZ
DECFSZ D3,1
GOTO C1
CLRW
MOVWF PORTB
C2
CALL ZZZ
DECFSZ D4,1
GOTO C2
RETURN

ZZZ ; ~0,04896125 sec
 MOVLW D'255'
 MOVWF D1
 MOVWF D2
 LOOP1
 DECFSZ D1,1
 GOTO LOOP1
 DECFSZ D2,1
 GOTO LOOP1
RETURN

END
