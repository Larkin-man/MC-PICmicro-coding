MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 #include<p16f84.inc>
                      00001         LIST
                      00002 ; P16F84.INC  Standard Header File, Version 2.00    Microchip Technology, Inc.
                      00136         LIST
0000                  00002  ORG 0
0000   2900           00003  GOTO BEGIN
0100                  00004  ORG 100h
0100                  00005 BEGIN
                      00006 
  0000000C            00007 D1 EQU 0Ch
  0000000D            00008 D2 EQU 0Dh
  0000000E            00009 D3 EQU 0Eh
  0000000F            00010 CURRENTFLOOR EQU 0Fh ;текущий этаж
  00000010            00011 COUNTSTEPS EQU 010h  ;Количество шагов (этажей)
  00000011            00012 ARROW EQU 011h       ;Направление движения (1 вверх, 0 вниз)
  00000012            00013 PURPOSEFLOOR EQU 012h ;целевой этаж
                      00014 
0100   1283           00015  BCF STATUS,RP0
0101   0186           00016  CLRF PORTB
0102   3000           00017  MOVLW B'00000000'
0103   1683           00018  BSF STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0104   0086           00019  MOVWF TRISB
                      00020 
0105   1283           00021  BCF STATUS,RP0
0106   0185           00022  CLRF PORTA
0107   301F           00023  MOVLW B'11111'
0108   1683           00024  BSF STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0109   0085           00025  MOVWF TRISA
010A   1283           00026  BCF STATUS,RP0
                      00027 
Warning[203]: Found opcode in column 1. (MOVLW)
010B   30C1           00028 MOVLW B'11000001'
Warning[203]: Found opcode in column 1. (MOVWF)
010C   0086           00029 MOVWF PORTB
                      00030 
010D                  00031 MAINLOOP
Warning[203]: Found opcode in column 1. (MOVF)
010D   0805           00032 MOVF PORTA,0
Warning[203]: Found opcode in column 1. (MOVWF)
010E   0092           00033 MOVWF PURPOSEFLOOR  ;Определить целевой этаж
Warning[203]: Found opcode in column 1. (CLRW)
010F   0103           00034 CLRW
Warning[203]: Found opcode in column 1. (XORWF)
0110   0612           00035 XORWF PURPOSEFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSC)
0111   1903           00036 BTFSC STATUS,Z
Warning[203]: Found opcode in column 1. (GOTO)
0112   290D           00037 GOTO MAINLOOP
Warning[203]: Found opcode in column 1. (CALL)
0113   211A           00038 CALL GETCURRENTFLOOR ;Определить текущий этаж
Warning[203]: Found opcode in column 1. (CALL)
MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0114   2148           00039 CALL GETPATH  ;Найти путь движения
Warning[203]: Found opcode in column 1. (BCF)
0115   1386           00040 BCF PORTB,7
Warning[203]: Found opcode in column 1. (BTFSS)
0116   1F91           00041 BTFSS ARROW,7  ;целевой этаж = текущему - двигать лифт не надо
Warning[203]: Found opcode in column 1. (CALL)
0117   2126           00042 CALL MOVLIFT ;Двигать лифт
Warning[203]: Found opcode in column 1. (CALL)
0118   2140           00043 CALL STOPLIFT ;Конечный этап
Warning[203]: Found opcode in column 1. (GOTO)
0119   290D           00044 GOTO MAINLOOP
                      00045 
011A                  00046 GETCURRENTFLOOR
Warning[203]: Found opcode in column 1. (CLRF)
011A   018F           00047 CLRF CURRENTFLOOR
Warning[203]: Found opcode in column 1. (BTFSC)
011B   1806           00048 BTFSC PORTB,0
Warning[203]: Found opcode in column 1. (BSF)
011C   140F           00049 BSF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSC)
011D   1886           00050 BTFSC PORTB,1
Warning[203]: Found opcode in column 1. (BSF)
011E   148F           00051 BSF CURRENTFLOOR,1
Warning[203]: Found opcode in column 1. (BTFSC)
011F   1906           00052 BTFSC PORTB,2
Warning[203]: Found opcode in column 1. (BSF)
0120   150F           00053 BSF CURRENTFLOOR,2
Warning[203]: Found opcode in column 1. (BTFSC)
0121   1986           00054 BTFSC PORTB,3
Warning[203]: Found opcode in column 1. (BSF)
0122   158F           00055 BSF CURRENTFLOOR,3
Warning[203]: Found opcode in column 1. (BTFSC)
0123   1A06           00056 BTFSC PORTB,4
Warning[203]: Found opcode in column 1. (BSF)
0124   160F           00057 BSF CURRENTFLOOR,4
Warning[203]: Found opcode in column 1. (RETURN)
0125   0008           00058 RETURN
                      00059 
0126                  00060 MOVLIFT
Warning[203]: Found opcode in column 1. (CALL)
0126   2171           00061 CALL P1s
Warning[203]: Found opcode in column 1. (BTFSC)
0127   1811           00062 BTFSC ARROW,0
Warning[203]: Found opcode in column 1. (CALL)
0128   212C           00063 CALL MOVUP
Warning[203]: Found opcode in column 1. (BTFSS)
0129   1C11           00064 BTFSS ARROW,0
Warning[203]: Found opcode in column 1. (CALL)
012A   2136           00065 CALL MOVDOWN
Warning[203]: Found opcode in column 1. (RETURN)
012B   0008           00066 RETURN
                      00067 
012C                  00068 MOVUP
MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012C                  00069 CYC3
Warning[203]: Found opcode in column 1. (CALL)
012C   2171           00070 CALL P1s
Warning[203]: Found opcode in column 1. (BCF)
012D   1003           00071 BCF STATUS,0
Warning[203]: Found opcode in column 1. (RRF)
012E   0C8F           00072 RRF CURRENTFLOOR,1
Warning[203]: Found opcode in column 1. (MOVLW)
012F   30E0           00073 MOVLW B'11100000'
Warning[203]: Found opcode in column 1. (ANDWF)
0130   0586           00074 ANDWF PORTB,1
Warning[203]: Found opcode in column 1. (MOVF)
0131   080F           00075 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (IORWF)
0132   0486           00076 IORWF PORTB,1
Warning[203]: Found opcode in column 1. (DECFSZ)
0133   0B90           00077 DECFSZ COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (GOTO)
0134   292C           00078 GOTO CYC3
Warning[203]: Found opcode in column 1. (RETURN)
0135   0008           00079 RETURN
                      00080 
0136                  00081 MOVDOWN
0136                  00082 CYC4
Warning[203]: Found opcode in column 1. (CALL)
0136   2171           00083 CALL P1s
Warning[203]: Found opcode in column 1. (BCF)
0137   1003           00084 BCF STATUS,0
Warning[203]: Found opcode in column 1. (RLF)
0138   0D8F           00085 RLF CURRENTFLOOR,1
Warning[203]: Found opcode in column 1. (MOVLW)
0139   30E0           00086 MOVLW B'11100000'
Warning[203]: Found opcode in column 1. (ANDWF)
013A   0586           00087 ANDWF PORTB,1
Warning[203]: Found opcode in column 1. (MOVF)
013B   080F           00088 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (IORWF)
013C   0486           00089 IORWF PORTB,1
Warning[203]: Found opcode in column 1. (DECFSZ)
013D   0B90           00090 DECFSZ COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (GOTO)
013E   2936           00091 GOTO CYC4
Warning[203]: Found opcode in column 1. (RETURN)
013F   0008           00092 RETURN
                      00093 
0140                  00094 STOPLIFT
Warning[203]: Found opcode in column 1. (BCF)
0140   1306           00095 BCF PORTB,6
Warning[203]: Found opcode in column 1. (BSF)
0141   1686           00096 BSF PORTB,5
Warning[203]: Found opcode in column 1. (CALL)
0142   2175           00097 CALL P5s
Warning[203]: Found opcode in column 1. (BCF)
MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0143   1286           00098 BCF PORTB,5
Warning[203]: Found opcode in column 1. (BSF)
0144   1706           00099 BSF PORTB,6
Warning[203]: Found opcode in column 1. (CALL)
0145   2179           00100 CALL P2s
Warning[203]: Found opcode in column 1. (BSF)
0146   1786           00101 BSF PORTB,7
Warning[203]: Found opcode in column 1. (RETURN)
0147   0008           00102 RETURN
                      00103 
0148                  00104 GETPATH ;функция ищет направление движения и количество шагов
Warning[203]: Found opcode in column 1. (CALL)
0148   214C           00105 CALL ISUP
Warning[203]: Found opcode in column 1. (BTFSS)
0149   1C11           00106 BTFSS ARROW,0
Warning[203]: Found opcode in column 1. (CALL)
014A   215E           00107 CALL ISDOWN
Warning[203]: Found opcode in column 1. (RETURN)
014B   0008           00108 RETURN
                      00109 
014C                  00110 ISUP ;проверяет верхнее напрвление
Warning[203]: Found opcode in column 1. (MOVF)
014C   080F           00111 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (MOVWF)
014D   008E           00112 MOVWF D3
Warning[203]: Found opcode in column 1. (CLRF)
014E   0191           00113 CLRF ARROW
Warning[203]: Found opcode in column 1. (CLRF)
014F   0190           00114 CLRF COUNTSTEPS
Warning[203]: Found opcode in column 1. (MOVLW)
0150   3001           00115 MOVLW 01h
Warning[203]: Found opcode in column 1. (MOVWF)
0151   008D           00116 MOVWF D2
0152                  00117 CYC1
Warning[203]: Found opcode in column 1. (MOVF)
0152   080E           00118 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
0153   060D           00119 XORWF D2,0
Warning[203]: Found opcode in column 1. (BTFSC)
0154   1903           00120 BTFSC STATUS,Z
Warning[203]: Found opcode in column 1. (RETURN)
0155   0008           00121 RETURN
Warning[203]: Found opcode in column 1. (INCF)
0156   0A90           00122 INCF COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (RRF)
0157   0C8E           00123 RRF D3,1
Warning[203]: Found opcode in column 1. (MOVF)
0158   080E           00124 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
0159   0612           00125 XORWF PURPOSEFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSS)
015A   1D03           00126 BTFSS STATUS,Z
Warning[203]: Found opcode in column 1. (GOTO)
MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

015B   2952           00127 GOTO CYC1
Warning[203]: Found opcode in column 1. (BSF)
015C   1411           00128 BSF ARROW,0
Warning[203]: Found opcode in column 1. (RETURN)
015D   0008           00129 RETURN
                      00130 
015E                  00131 ISDOWN ;проверяет нижнее напрвление
Warning[203]: Found opcode in column 1. (BSF)
015E   1791           00132 BSF ARROW,7
Warning[203]: Found opcode in column 1. (CLRF)
015F   0190           00133 CLRF COUNTSTEPS
Warning[203]: Found opcode in column 1. (MOVF)
0160   080F           00134 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (MOVWF)
0161   008E           00135 MOVWF D3
Warning[203]: Found opcode in column 1. (MOVLW)
0162   3010           00136 MOVLW B'00010000'
Warning[203]: Found opcode in column 1. (MOVWF)
0163   008D           00137 MOVWF D2
0164                  00138 CYC2
Warning[203]: Found opcode in column 1. (MOVF)
0164   080E           00139 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
0165   060D           00140 XORWF D2,0
Warning[203]: Found opcode in column 1. (BTFSC)
0166   1903           00141 BTFSC STATUS,Z
Warning[203]: Found opcode in column 1. (RETURN)
0167   0008           00142 RETURN
Warning[203]: Found opcode in column 1. (INCF)
0168   0A90           00143 INCF COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (RLF)
0169   0D8E           00144 RLF D3,1
Warning[203]: Found opcode in column 1. (MOVF)
016A   080E           00145 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
016B   0612           00146 XORWF PURPOSEFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSS)
016C   1D03           00147 BTFSS STATUS,Z
Warning[203]: Found opcode in column 1. (GOTO)
016D   2964           00148 GOTO CYC2
Warning[203]: Found opcode in column 1. (BCF)
016E   1391           00149 BCF ARROW,7
Warning[203]: Found opcode in column 1. (BCF)
016F   1011           00150 BCF ARROW,0
Warning[203]: Found opcode in column 1. (RETURN)
0170   0008           00151 RETURN
                      00152 
0171                  00153 P1s
Warning[203]: Found opcode in column 1. (MOVLW)
0171   3014           00154 MOVLW D'20'
Warning[203]: Found opcode in column 1. (MOVWF)
0172   008E           00155 MOVWF D3
Warning[203]: Found opcode in column 1. (CALL)
MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0173   217D           00156 CALL PULS
Warning[203]: Found opcode in column 1. (RETURN)
0174   0008           00157 RETURN
                      00158 
0175                  00159 P5s
Warning[203]: Found opcode in column 1. (MOVLW)
0175   3066           00160 MOVLW D'102'
Warning[203]: Found opcode in column 1. (MOVWF)
0176   008E           00161 MOVWF D3
Warning[203]: Found opcode in column 1. (CALL)
0177   217D           00162 CALL PULS
Warning[203]: Found opcode in column 1. (RETURN)
0178   0008           00163 RETURN
                      00164 
0179                  00165 P2s
Warning[203]: Found opcode in column 1. (MOVLW)
0179   3029           00166 MOVLW D'41'
Warning[203]: Found opcode in column 1. (MOVWF)
017A   008E           00167 MOVWF D3
Warning[203]: Found opcode in column 1. (CALL)
017B   217D           00168 CALL PULS
Warning[203]: Found opcode in column 1. (RETURN)
017C   0008           00169 RETURN
                      00170 
017D                  00171 PULS
017D                  00172 C1
Warning[203]: Found opcode in column 1. (CALL)
017D   2181           00173 CALL ZZZ
Warning[203]: Found opcode in column 1. (DECFSZ)
017E   0B8E           00174 DECFSZ D3,1
Warning[203]: Found opcode in column 1. (GOTO)
017F   297D           00175 GOTO C1
Warning[203]: Found opcode in column 1. (RETURN)
0180   0008           00176 RETURN
                      00177 
0181                  00178 ZZZ ; ~0,04896125 sec
0181   30FF           00179  MOVLW D'255'
0182   008C           00180  MOVWF D1
0183   008D           00181  MOVWF D2
Warning[207]: Found label after column 1. (LOOP1)
0184                  00182  LOOP1
0184   0B8C           00183  DECFSZ D1,1
0185   2984           00184  GOTO LOOP1
0186   0B8D           00185  DECFSZ D2,1
0187   2984           00186  GOTO LOOP1
Warning[203]: Found opcode in column 1. (RETURN)
0188   0008           00187 RETURN
                      00188 
Warning[205]: Found directive in column 1. (END)
                      00189 END
MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  7


SYMBOL TABLE
  LABEL                             VALUE 

ARROW                             00000011
BEGIN                             00000100
C                                 00000000
C1                                0000017D
COUNTSTEPS                        00000010
CURRENTFLOOR                      0000000F
CYC1                              00000152
CYC2                              00000164
CYC3                              0000012C
CYC4                              00000136
D1                                0000000C
D2                                0000000D
D3                                0000000E
DC                                00000001
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
F                                 00000001
FSR                               00000004
GETCURRENTFLOOR                   0000011A
GETPATH                           00000148
GIE                               00000007
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
ISDOWN                            0000015E
ISUP                              0000014C
LOOP1                             00000184
MAINLOOP                          0000010D
MOVDOWN                           00000136
MOVLIFT                           00000126
MOVUP                             0000012C
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
OPTION_REG                        00000081
P1s                               00000171
P2s                               00000179
P5s                               00000175
PCL                               00000002
PCLATH                            0000000A
PORTA                             00000005
PORTB                             00000006
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  8


SYMBOL TABLE
  LABEL                             VALUE 

PULS                              0000017D
PURPOSEFLOOR                      00000012
RBIE                              00000003
RBIF                              00000000
RD                                00000000
RP0                               00000005
RP1                               00000006
STATUS                            00000003
STOPLIFT                          00000140
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
TMR0                              00000001
TRISA                             00000085
TRISB                             00000086
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
ZZZ                               00000181
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84                           00000001


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X--------------- ---------------- ---------------- ----------------
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXX------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   138
Program Memory Words Free:   886


MPASM 02.80 Released            LAB12.ASM   3-30-2009  13:28:23         PAGE  9





Errors   :     0
Warnings :   121 reported,     0 suppressed
Messages :     2 reported,     0 suppressed

