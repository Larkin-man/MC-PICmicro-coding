MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 #include<p16f84.inc>
                      00001         LIST
                      00002 ; P16F84.INC  Standard Header File, Version 2.00    Microchip Technology, Inc.
                      00136         LIST
0000                  00002  ORG 0
0000   2900           00003  GOTO BEGIN
0100                  00004  ORG 100h
0100                  00005 BEGIN
                      00006 
  0000000C            00007 D1 EQU 0Ch
  0000000D            00008 D2 EQU 0Dh
  0000000E            00009 D3 EQU 0Eh
  0000000F            00010 CURRENTFLOOR EQU 0Fh ;текущий этаж
  00000010            00011 COUNTSTEPS EQU 010h  ;Количество шагов (этажей)
  00000011            00012 ARROW EQU 011h       ;Направление движения (1 вверх, 0 вниз)
  00000012            00013 PURPOSEFLOOR EQU 012h ;целевой этаж
                      00014 
0100   1283           00015  BCF STATUS,RP0
0101   0186           00016  CLRF PORTB
0102   3000           00017  MOVLW B'00000000'
0103   1683           00018  BSF STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0104   0086           00019  MOVWF TRISB
                      00020 
0105   1283           00021  BCF STATUS,RP0
0106   0185           00022  CLRF PORTA
0107   3000           00023  MOVLW B'00000'
0108   1683           00024  BSF STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0109   0085           00025  MOVWF TRISA
010A   1283           00026  BCF STATUS,RP0
                      00027 
Warning[203]: Found opcode in column 1. (MOVLW)
010B   30C1           00028 MOVLW B'11000001'
Warning[203]: Found opcode in column 1. (MOVWF)
010C   0086           00029 MOVWF PORTB
                      00030 
010D                  00031 MAINLOOP
Warning[203]: Found opcode in column 1. (MOVF)
010D   0805           00032 MOVF PORTA,0
Warning[203]: Found opcode in column 1. (MOVWF)
010E   0092           00033 MOVWF PURPOSEFLOOR  ;Определить целевой этаж
Warning[203]: Found opcode in column 1. (CLRW)
010F   0103           00034 CLRW
Warning[203]: Found opcode in column 1. (XORWF)
0110   0612           00035 XORWF PURPOSEFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSC)
0111   1903           00036 BTFSC STATUS,Z
Warning[203]: Found opcode in column 1. (GOTO)
0112   290D           00037 GOTO MAINLOOP
Warning[203]: Found opcode in column 1. (CALL)
0113   211A           00038 CALL GETCURRENTFLOOR ;Определить текущий этаж
Warning[203]: Found opcode in column 1. (CALL)
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0114   214B           00039 CALL GETPATH  ;Найти путь движения
Warning[203]: Found opcode in column 1. (BCF)
0115   1386           00040 BCF PORTB,7
Warning[203]: Found opcode in column 1. (BTFSS)
0116   1F91           00041 BTFSS ARROW,7  ;целевой этаж = текущему - двигать лифт не надо
Warning[203]: Found opcode in column 1. (CALL)
0117   2126           00042 CALL MOVLIFT ;Двигать лифт
Warning[203]: Found opcode in column 1. (CALL)
0118   2140           00043 CALL STOPLIFT ;Конечный этап
Warning[203]: Found opcode in column 1. (GOTO)
0119   290D           00044 GOTO MAINLOOP
                      00045 
011A                  00046 GETCURRENTFLOOR
Warning[203]: Found opcode in column 1. (CLRF)
011A   018F           00047 CLRF CURRENTFLOOR
Warning[203]: Found opcode in column 1. (BTFSC)
011B   1806           00048 BTFSC PORTB,0
Warning[203]: Found opcode in column 1. (BSF)
011C   140F           00049 BSF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSC)
011D   1886           00050 BTFSC PORTB,1
Warning[203]: Found opcode in column 1. (BSF)
011E   148F           00051 BSF CURRENTFLOOR,1
Warning[203]: Found opcode in column 1. (BTFSC)
011F   1906           00052 BTFSC PORTB,2
Warning[203]: Found opcode in column 1. (BSF)
0120   150F           00053 BSF CURRENTFLOOR,2
Warning[203]: Found opcode in column 1. (BTFSC)
0121   1986           00054 BTFSC PORTB,3
Warning[203]: Found opcode in column 1. (BSF)
0122   158F           00055 BSF CURRENTFLOOR,3
Warning[203]: Found opcode in column 1. (BTFSC)
0123   1A06           00056 BTFSC PORTB,4
Warning[203]: Found opcode in column 1. (BSF)
0124   160F           00057 BSF CURRENTFLOOR,4
Warning[203]: Found opcode in column 1. (RETURN)
0125   0008           00058 RETURN
                      00059 
0126                  00060 MOVLIFT
Warning[203]: Found opcode in column 1. (CALL)
0126   2184           00061 CALL ZZZ
Warning[203]: Found opcode in column 1. (BTFSC)
0127   1811           00062 BTFSC ARROW,0
Warning[203]: Found opcode in column 1. (CALL)
0128   212C           00063 CALL MOVUP
Warning[203]: Found opcode in column 1. (BTFSS)
0129   1C11           00064 BTFSS ARROW,0
Warning[203]: Found opcode in column 1. (CALL)
012A   2136           00065 CALL MOVDOWN
Warning[203]: Found opcode in column 1. (RETURN)
012B   0008           00066 RETURN
                      00067 
012C                  00068 MOVUP
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012C                  00069 CYC3
Warning[203]: Found opcode in column 1. (CALL)
012C   2184           00070 CALL ZZZ
Warning[203]: Found opcode in column 1. (BCF)
012D   1003           00071 BCF STATUS,0
Warning[203]: Found opcode in column 1. (RRF)
012E   0C8F           00072 RRF CURRENTFLOOR,1
Warning[203]: Found opcode in column 1. (MOVLW)
012F   30E0           00073 MOVLW B'11100000'
Warning[203]: Found opcode in column 1. (ANDWF)
0130   0586           00074 ANDWF PORTB,1
Warning[203]: Found opcode in column 1. (MOVF)
0131   080F           00075 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (IORWF)
0132   0486           00076 IORWF PORTB,1
Warning[203]: Found opcode in column 1. (DECFSZ)
0133   0B90           00077 DECFSZ COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (GOTO)
0134   292C           00078 GOTO CYC3
Warning[203]: Found opcode in column 1. (RETURN)
0135   0008           00079 RETURN
                      00080 
0136                  00081 MOVDOWN
0136                  00082 CYC4
Warning[203]: Found opcode in column 1. (CALL)
0136   2184           00083 CALL ZZZ
Warning[203]: Found opcode in column 1. (BCF)
0137   1003           00084 BCF STATUS,0
Warning[203]: Found opcode in column 1. (RLF)
0138   0D8F           00085 RLF CURRENTFLOOR,1
Warning[203]: Found opcode in column 1. (MOVLW)
0139   30E0           00086 MOVLW B'11100000'
Warning[203]: Found opcode in column 1. (ANDWF)
013A   0586           00087 ANDWF PORTB,1
Warning[203]: Found opcode in column 1. (MOVF)
013B   080F           00088 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (IORWF)
013C   0486           00089 IORWF PORTB,1
Warning[203]: Found opcode in column 1. (DECFSZ)
013D   0B90           00090 DECFSZ COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (GOTO)
013E   2936           00091 GOTO CYC4
Warning[203]: Found opcode in column 1. (RETURN)
013F   0008           00092 RETURN
                      00093 
0140                  00094 STOPLIFT
Warning[203]: Found opcode in column 1. (BCF)
0140   1306           00095 BCF PORTB,6
Warning[203]: Found opcode in column 1. (BSF)
0141   1686           00096 BSF PORTB,5
Warning[203]: Found opcode in column 1. (CALL)
0142   2184           00097 CALL ZZZ
Warning[203]: Found opcode in column 1. (CALL)
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0143   2184           00098 CALL ZZZ
Warning[203]: Found opcode in column 1. (CALL)
0144   2184           00099 CALL ZZZ
Warning[203]: Found opcode in column 1. (BCF)
0145   1286           00100 BCF PORTB,5
Warning[203]: Found opcode in column 1. (BSF)
0146   1706           00101 BSF PORTB,6
Warning[203]: Found opcode in column 1. (CALL)
0147   2184           00102 CALL ZZZ
Warning[203]: Found opcode in column 1. (CALL)
0148   2184           00103 CALL ZZZ
Warning[203]: Found opcode in column 1. (BSF)
0149   1786           00104 BSF PORTB,7
Warning[203]: Found opcode in column 1. (RETURN)
014A   0008           00105 RETURN
                      00106 
014B                  00107 GETPATH ;функция ищет направление движения и количество шагов
Warning[203]: Found opcode in column 1. (CALL)
014B   214F           00108 CALL ISUP
Warning[203]: Found opcode in column 1. (BTFSS)
014C   1C11           00109 BTFSS ARROW,0
Warning[203]: Found opcode in column 1. (CALL)
014D   2161           00110 CALL ISDOWN
Warning[203]: Found opcode in column 1. (RETURN)
014E   0008           00111 RETURN
                      00112 
014F                  00113 ISUP ;проверяет верхнее напрвление
Warning[203]: Found opcode in column 1. (MOVF)
014F   080F           00114 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (MOVWF)
0150   008E           00115 MOVWF D3
Warning[203]: Found opcode in column 1. (CLRF)
0151   0191           00116 CLRF ARROW
Warning[203]: Found opcode in column 1. (CLRF)
0152   0190           00117 CLRF COUNTSTEPS
Warning[203]: Found opcode in column 1. (MOVLW)
0153   3001           00118 MOVLW 01h
Warning[203]: Found opcode in column 1. (MOVWF)
0154   008D           00119 MOVWF D2
0155                  00120 CYC1
Warning[203]: Found opcode in column 1. (MOVF)
0155   080E           00121 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
0156   060D           00122 XORWF D2,0
Warning[203]: Found opcode in column 1. (BTFSC)
0157   1903           00123 BTFSC STATUS,Z
Warning[203]: Found opcode in column 1. (RETURN)
0158   0008           00124 RETURN
Warning[203]: Found opcode in column 1. (INCF)
0159   0A90           00125 INCF COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (RRF)
015A   0C8E           00126 RRF D3,1
Warning[203]: Found opcode in column 1. (MOVF)
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

015B   080E           00127 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
015C   0612           00128 XORWF PURPOSEFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSS)
015D   1D03           00129 BTFSS STATUS,Z
Warning[203]: Found opcode in column 1. (GOTO)
015E   2955           00130 GOTO CYC1
Warning[203]: Found opcode in column 1. (BSF)
015F   1411           00131 BSF ARROW,0
Warning[203]: Found opcode in column 1. (RETURN)
0160   0008           00132 RETURN
                      00133 
0161                  00134 ISDOWN ;проверяет нижнее напрвление
Warning[203]: Found opcode in column 1. (BSF)
0161   1791           00135 BSF ARROW,7
Warning[203]: Found opcode in column 1. (CLRF)
0162   0190           00136 CLRF COUNTSTEPS
Warning[203]: Found opcode in column 1. (MOVF)
0163   080F           00137 MOVF CURRENTFLOOR,0
Warning[203]: Found opcode in column 1. (MOVWF)
0164   008E           00138 MOVWF D3
Warning[203]: Found opcode in column 1. (MOVLW)
0165   3010           00139 MOVLW B'00010000'
Warning[203]: Found opcode in column 1. (MOVWF)
0166   008D           00140 MOVWF D2
0167                  00141 CYC2
Warning[203]: Found opcode in column 1. (MOVF)
0167   080E           00142 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
0168   060D           00143 XORWF D2,0
Warning[203]: Found opcode in column 1. (BTFSC)
0169   1903           00144 BTFSC STATUS,Z
Warning[203]: Found opcode in column 1. (RETURN)
016A   0008           00145 RETURN
Warning[203]: Found opcode in column 1. (INCF)
016B   0A90           00146 INCF COUNTSTEPS,1
Warning[203]: Found opcode in column 1. (RLF)
016C   0D8E           00147 RLF D3,1
Warning[203]: Found opcode in column 1. (MOVF)
016D   080E           00148 MOVF D3,0
Warning[203]: Found opcode in column 1. (XORWF)
016E   0612           00149 XORWF PURPOSEFLOOR,0
Warning[203]: Found opcode in column 1. (BTFSS)
016F   1D03           00150 BTFSS STATUS,Z
Warning[203]: Found opcode in column 1. (GOTO)
0170   2967           00151 GOTO CYC2
Warning[203]: Found opcode in column 1. (BCF)
0171   1391           00152 BCF ARROW,7
Warning[203]: Found opcode in column 1. (BCF)
0172   1011           00153 BCF ARROW,0
Warning[203]: Found opcode in column 1. (RETURN)
0173   0008           00154 RETURN
                      00155 
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0174                  00156 P1s
Warning[203]: Found opcode in column 1. (MOVLW)
0174   3014           00157 MOVLW D'20'
Warning[203]: Found opcode in column 1. (MOVWF)
0175   008E           00158 MOVWF D3
Warning[203]: Found opcode in column 1. (CALL)
0176   2180           00159 CALL PULS
Warning[203]: Found opcode in column 1. (RETURN)
0177   0008           00160 RETURN
                      00161 
0178                  00162 P5s
Warning[203]: Found opcode in column 1. (MOVLW)
0178   3066           00163 MOVLW D'102'
Warning[203]: Found opcode in column 1. (MOVWF)
0179   008E           00164 MOVWF D3
Warning[203]: Found opcode in column 1. (CALL)
017A   2180           00165 CALL PULS
Warning[203]: Found opcode in column 1. (RETURN)
017B   0008           00166 RETURN
                      00167 
017C                  00168 P2s
Warning[203]: Found opcode in column 1. (MOVLW)
017C   3029           00169 MOVLW D'41'
Warning[203]: Found opcode in column 1. (MOVWF)
017D   008E           00170 MOVWF D3
Warning[203]: Found opcode in column 1. (CALL)
017E   2180           00171 CALL PULS
Warning[203]: Found opcode in column 1. (RETURN)
017F   0008           00172 RETURN
                      00173 
0180                  00174 PULS
0180                  00175 C1
Warning[203]: Found opcode in column 1. (CALL)
0180   2184           00176 CALL ZZZ
Warning[203]: Found opcode in column 1. (DECFSZ)
0181   0B8E           00177 DECFSZ D3,1
Warning[203]: Found opcode in column 1. (GOTO)
0182   2980           00178 GOTO C1
Warning[203]: Found opcode in column 1. (RETURN)
0183   0008           00179 RETURN
                      00180 
0184                  00181 ZZZ ; ~0,04896125 sec
0184   30FF           00182  MOVLW D'255'
0185   008C           00183  MOVWF D1
0186   008D           00184  MOVWF D2
Warning[207]: Found label after column 1. (LOOP1)
0187                  00185  LOOP1
0187   0B8C           00186  DECFSZ D1,1
0188   2987           00187  GOTO LOOP1
0189   0B8D           00188  DECFSZ D2,1
018A   2987           00189  GOTO LOOP1
Warning[203]: Found opcode in column 1. (RETURN)
018B   0008           00190 RETURN
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00191 
Warning[205]: Found directive in column 1. (END)
                      00192 END
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  8


SYMBOL TABLE
  LABEL                             VALUE 

ARROW                             00000011
BEGIN                             00000100
C                                 00000000
C1                                00000180
COUNTSTEPS                        00000010
CURRENTFLOOR                      0000000F
CYC1                              00000155
CYC2                              00000167
CYC3                              0000012C
CYC4                              00000136
D1                                0000000C
D2                                0000000D
D3                                0000000E
DC                                00000001
EEADR                             00000009
EECON1                            00000088
EECON2                            00000089
EEDATA                            00000008
EEIE                              00000006
EEIF                              00000004
F                                 00000001
FSR                               00000004
GETCURRENTFLOOR                   0000011A
GETPATH                           0000014B
GIE                               00000007
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
ISDOWN                            00000161
ISUP                              0000014F
LOOP1                             00000187
MAINLOOP                          0000010D
MOVDOWN                           00000136
MOVLIFT                           00000126
MOVUP                             0000012C
NOT_PD                            00000003
NOT_RBPU                          00000007
NOT_TO                            00000004
OPTION_REG                        00000081
P1s                               00000174
P2s                               0000017C
P5s                               00000178
PCL                               00000002
PCLATH                            0000000A
PORTA                             00000005
PORTB                             00000006
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE  9


SYMBOL TABLE
  LABEL                             VALUE 

PULS                              00000180
PURPOSEFLOOR                      00000012
RBIE                              00000003
RBIF                              00000000
RD                                00000000
RP0                               00000005
RP1                               00000006
STATUS                            00000003
STOPLIFT                          00000140
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
TMR0                              00000001
TRISA                             00000085
TRISB                             00000086
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
ZZZ                               00000184
_CP_OFF                           00003FFF
_CP_ON                            0000000F
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F84                           00000001


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X--------------- ---------------- ---------------- ----------------
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXX---- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   141
Program Memory Words Free:   883


MPASM 02.80 Released              LAB12.ASM   10-30-2010  0:31:09         PAGE 10





Errors   :     0
Warnings :   124 reported,     0 suppressed
Messages :     2 reported,     0 suppressed

